[build]
target = "index.html"
dist = "dist"

[watch]
ignore = ["assets", "dist", "target"]

# Copy 404.html for GitHub Pages SPA routing
[[hooks]]
stage = "post_build"
command = "sh"
command_arguments = ["-c", "cp 404.html dist/ 2>/dev/null || true"]

# Create /upload route directory with redirect
[[hooks]]
stage = "post_build"
command = "sh"
command_arguments = ["-c", "mkdir -p dist/upload && cp 404.html dist/upload/index.html 2>/dev/null || true"]

# Note: wasm-opt optimization is handled via data-wasm-opt="z" in index.html
